{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\prefab/assets\\Script\\prefab\\courseNode.js"],"names":["cc","Class","extends","Component","properties","clickLabel","Label","tipLabel","handSprite","Sprite","onLoad","winSize","director","getWinSize","node","active","onStartMoveSnake","width","height","start","clickNumber","setPositionX","string","action1","moveBy","action2","seq","sequence","rep","repeatForever","runAction","onShowSnakeBlood","stopAllActions","rotation","setPosition","p","window","Global_heroRadius","onShowSquareBlood","Global_suqareWidth","onShowCrashResult","onShowResult","onDestroy","sys","localStorage","setItem","dispatchEvent","Event","EventCustom","onClickCallback","isFirstPlay","getItem"],"mappings":"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","file":"courseNode.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\prefab","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        clickLabel: cc.Label,\n        tipLabel: cc.Label,\n        handSprite: cc.Sprite,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.winSize = cc.director.getWinSize();\n        this.node.active = true;\n        this.onStartMoveSnake();\n        this.node.width = this.winSize.width;\n        this.node.height = this.winSize.height;\n        //console.log(this.node);\n    },\n\n    start () {\n        this.clickNumber = 0;\n    },\n\n    //提示1 - 拖动开始游戏\n    onStartMoveSnake: function(){\n        if(!this.handSprite.node.active){\n            this.handSprite.node.active = true;\n        }\n        this.handSprite.node.setPositionX(-this.winSize.width/6);\n        this.clickLabel.string = \"左右滑动控制小蛇\";\n        this.tipLabel.string = \"\";\n\n        //动作列表\n        var action1 = cc.moveBy(1.5, this.winSize.width/3, 0);\n        var action2 = cc.moveBy(1.5, -this.winSize.width/3, 0);\n        //顺序执行容器\n        var seq = cc.sequence(action1, action2)\n        //反复执行动作\n        var rep = cc.repeatForever(seq);\n        this.handSprite.node.runAction(rep);\n    },\n\n    //提示2 - 指示血量\n    onShowSnakeBlood: function(){\n        this.handSprite.node.stopAllActions();\n        this.handSprite.node.rotation = 90;\n        this.clickLabel.string = \"点击屏幕继续\";\n        this.tipLabel.string = \"小蛇的生命值\";\n\n        //改变手指的位置\n        this.handSprite.node.setPosition(cc.p(-this.handSprite.node.width, this.winSize.height/2 - 4*this.winSize.height/7 + window.Global_heroRadius/2));\n\n        //手指的指向动画\n        var action1 = cc.moveBy(0.5, 10, 0);\n        var action2 = cc.moveBy(0.5, -10, 0);\n         //顺序执行容器\n         var seq = cc.sequence(action1, action2)\n         //反复执行动作\n         var rep = cc.repeatForever(seq);\n         this.handSprite.node.runAction(rep);\n    },\n\n    //提示3 - 方块血量\n    onShowSquareBlood: function(){\n        this.handSprite.node.stopAllActions();\n        this.handSprite.node.rotation = 0;\n\n        this.clickLabel.string = \"点击屏幕继续\";\n        this.tipLabel.string = \"障碍物的生命值\";\n\n        //改变手指的位置\n        this.handSprite.node.setPosition(cc.p(this.winSize.width/2- window.Global_suqareWidth/2, this.winSize.height/2 - window.Global_suqareWidth - this.handSprite.node.height/2));\n\n        //手指的指向动画\n        var action1 = cc.moveBy(0.5, 0, 10);\n        var action2 = cc.moveBy(0.5, 0, -10);\n         //顺序执行容器\n         var seq = cc.sequence(action1, action2)\n         //反复执行动作\n         var rep = cc.repeatForever(seq);\n         this.handSprite.node.runAction(rep);\n    },\n\n    //提示4 - 相撞血量减少\n    onShowCrashResult: function(){\n        this.handSprite.node.stopAllActions();\n        this.handSprite.node.active = false;\n        this.clickLabel.string = \"点击屏幕继续\";\n        this.tipLabel.string = \"小蛇与方块相撞时生命同时减少\";\n    },\n\n    //提示5 - 方块消失 小蛇死亡条件\n    onShowResult: function(){\n        this.clickLabel.string = \"点击屏幕开始你的游戏之旅\";\n        this.tipLabel.string = \"当方块生命值为0时消失\\n当小蛇的生命值为0时死亡\";\n    },\n    \n    //第六次点击销毁当前节点， 开始游戏\n    onDestroy: function(){\n        this.node.active = false;\n        cc.sys.localStorage.setItem(\"isFirstPlay\", 1);\n        this.node.dispatchEvent( new cc.Event.EventCustom('courseNodeDestroy', true) );\n    },\n\n    //点击屏幕事件\n    onClickCallback: function(){\n        //获取用户本地数据 -- 是否是第一次玩游戏\n        var isFirstPlay = cc.sys.localStorage.getItem(\"isFirstPlay\");\n        if(!isFirstPlay){\n            isFirstPlay = 0;\n        }\n        if(!isFirstPlay){\n            this.clickNumber ++;\n            switch(this.clickNumber){\n                case 1:\n                this.onShowSnakeBlood();\n                break;\n                case 2:\n                this.onShowSquareBlood();\n                break;\n                case 3:\n                this.onShowCrashResult();\n                break;\n                case 4:\n                this.onShowResult();\n                break;\n                case 5:\n                this.onDestroy();\n                break;\n            }\n        }else{\n            this.onDestroy();\n        }\n    }\n\n    // update (dt) {},\n});\n"]}